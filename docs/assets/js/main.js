const listResult=document.querySelector(".js-list-result"),listFavourites=document.querySelector(".js-list-favourites"),searchBtn=document.querySelector(".js-search-btn"),resetBtn=document.querySelector(".js-reset-btn"),resetFavouritesBtn=document.querySelector(".js-resetFavourites-btn");let resultSearch,favouriteAnimes=[];function getAnimes(e){fetch("https://api.jikan.moe/v3/search/anime?q="+e).then(e=>e.json()).then(e=>{resultSearch=e.results.map(e=>e),resultSearch.forEach(e=>{createAnimeCard(e,listResult,"AÃ±adir a series favoritas")})})}function resetList(e){e.replaceChildren()}function createAnimeCard(e,t,r){const s=e.image_url||"https://via.placeholder.com/210x295/ffffff/666666/?text=TV",n=e.title,i=e.mal_id,a=document.createElement("li"),c=document.createElement("h3"),u=document.createElement("img"),o=document.createElement("button");o.innerText=r,c.innerText=n,u.src=s,a.append(c,u,o),a.dataset.id=i,t.appendChild(a),a.addEventListener("click",setFavourite)}function setFavourite(e){const t=searchAnimeById(e.currentTarget.dataset.id,resultSearch);renderFavourites(t),favouriteAnimes.push(t)}function searchAnimeById(e,t){return t.find(t=>t.mal_id===parseInt(e))}function renderFavourites(e){searchAnimeById(e.mal_id,favouriteAnimes)||createAnimeCard(e,listFavourites,"Borrar de favoritos")}searchBtn.addEventListener("click",e=>{const t=document.querySelector("#anime").value;e.preventDefault(),resetList(listResult),getAnimes(t)}),resetBtn.addEventListener("click",e=>{resetList(listResult)}),resetFavouritesBtn.addEventListener("click",e=>{resetList(listFavourites)});